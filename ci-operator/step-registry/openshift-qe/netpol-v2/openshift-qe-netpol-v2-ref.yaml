ref:
  as: openshift-qe-netpol-v2
  from_image:
    namespace: ci
    name: ocp-qe-perfscale-ci
    tag: latest
  cli: latest
  env:
  - name: ITERATION_MULTIPLIER_ENV
    default: "9"
    documentation: |-
      The number of iterations per worker nodes to create
  - name: PODS_PER_NAMESPACE
    default: "10"
    documentation: |-
      Pods Per Namespace
  - name: NETPOL_PER_NAMESPACE
    default: "10"
    documentation: |-
      Network Policies Per Namespace
  - name: LOCAL_PODS
    default: "3"
    documentation: |-
      Apply Network Policy on how many pods in a Namespace
  - name: SINGLE_PORTS
    default: "3"
    documentation: |-
      Restrict Ingress/Egress Traffic on Ports
  - name: PORT_RANGES
    default: "3"
    documentation: |-
      Restrict Ingress/Egress Traffic on Port Ranges
  - name: REMOTE_NAMESPACES
    default: "3"
    documentation: |-
      Allow Traffic from Desired Namespace
  - name: REMOTE_PODS
    default: "3"
    documentation: |-
      Allow Traffic from Desired Pods in a Namespace
  - name: CIDR
    default: "3"
    documentation: |-
      Allow Traffic from Desired IP Range in a Namespace
  commands: openshift-qe-netpol-v2-commands.sh
  timeout: 6h
  credentials:
  - namespace: test-credentials # this entry injects the custom credential
    name: ocp-qe-perfscale-es
    mount_path: /secret
  - namespace: test-credentials
    name: stackrox-perfscale-elasticsearch
    mount_path: /secret_stackrox
  - namespace: test-credentials
    name: ocp-perfscale-horreum-poc
    mount_path: /horreum-secret
  resources:
    requests:
      cpu: 100m
      memory: 100Mi
  documentation: >-
    This step runs the perfscale configmap-scale workload in the deployed cluster
